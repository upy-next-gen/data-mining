
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Percepción de Seguridad en Yucatán</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { background-color: #f8f9fa; }
        .card { margin-bottom: 1.5rem; box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,.075); }
        .chart-container { background-color: white; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,.075); }
        .text-muted-custom { color: #6c757d; font-size: 0.9rem; margin-top: 0.5rem; }
    </style>
</head>
<body>
    <div class="container-fluid mt-4">
        <div class="px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
            <h1 class="display-4">Percepción de Seguridad en Yucatán</h1>
            <p class="lead">Análisis de datos históricos de la encuesta ENSU. Fecha del reporte: 13-09-2025 15:01</p>
        </div>

        <!-- Section 1: KPIs -->
        <div class="row text-center">
            <div class="col-md-6">
                <div class="card text-white" style="background-color: #00695C;">
                    <div class="card-header">Municipio con Mayor Percepción de Inseguridad (Promedio)</div>
                    <div class="card-body">
                        <h2 class="card-title">KANASIN</h2>
                        <p class="card-text" style="font-size: 1.5rem;">51.03%</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card text-white" style="background-color: #20c997;">
                    <div class="card-header">Municipio con Menor Percepción deInseguridad (Promedio)</div>
                    <div class="card-body">
                        <h2 class="card-title">MERIDA</h2>
                        <p class="card-text" style="font-size: 1.5rem;">25.17%</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 2: Time-series Chart -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="chart-container">
                    <h3>Evolución de la Percepción de Inseguridad (Promedio Estatal)</h3>
                    <div id="line-chart"></div>
                    <p class="text-muted-custom">Este gráfico muestra el promedio del porcentaje de percepción de inseguridad en todo el estado de Yucatán a través de los diferentes trimestres, permitiendo identificar tendencias y cambios a lo largo del tiempo.</p>
                </div>
            </div>
        </div>

        <!-- Section 3: Bar Chart -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="chart-container">
                    <h3>Inseguridad Promedio por Municipio</h3>
                    <div id="bar-chart"></div>
                    <p class="text-muted-custom">Este gráfico clasifica los municipios según su percepción de inseguridad promedio, calculada a partir de todos los periodos disponibles. Permite comparar directamente qué municipios son percibidos como más o menos seguros.</p>
                </div>
            </div>
        </div>

        <!-- Section 4: Data Table -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="chart-container">
                    <h3>Datos Completos</h3>
                    <table border="1" class="dataframe table table-striped" id="dataTable">
  <thead>
    <tr style="text-align: right;">
      <th>Municipio</th>
      <th>% Inseguridad</th>
      <th>Periodo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>KANASIN</td>
      <td>45.71</td>
      <td>2024_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>26.19</td>
      <td>2024_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>40.00</td>
      <td>2024_Q4</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>70.00</td>
      <td>2024_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>24.24</td>
      <td>2024_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>23.15</td>
      <td>2024_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>37.50</td>
      <td>2024_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>33.33</td>
      <td>2024_Q2</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>17.70</td>
      <td>2024_Q2</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>50.00</td>
      <td>2024_Q2</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>60.00</td>
      <td>2024_Q2</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>20.00</td>
      <td>2024_Q3</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>20.63</td>
      <td>2024_Q3</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>40.00</td>
      <td>2024_Q3</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>40.00</td>
      <td>2024_Q3</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>53.85</td>
      <td>2018_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>25.57</td>
      <td>2018_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>33.33</td>
      <td>2018_Q4</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>47.37</td>
      <td>2018_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>47.83</td>
      <td>2022_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>25.94</td>
      <td>2022_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>43.48</td>
      <td>2022_Q4</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>25.00</td>
      <td>2022_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>28.57</td>
      <td>2020_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>22.22</td>
      <td>2020_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>43.48</td>
      <td>2020_Q1</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>33.33</td>
      <td>2020_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>30.00</td>
      <td>2020_Q3</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>21.23</td>
      <td>2020_Q3</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>42.86</td>
      <td>2020_Q3</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>25.00</td>
      <td>2020_Q3</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>71.43</td>
      <td>2018_Q2</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>30.88</td>
      <td>2018_Q2</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>50.00</td>
      <td>2018_Q2</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>35.71</td>
      <td>2018_Q2</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>54.17</td>
      <td>2022_Q3</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>24.64</td>
      <td>2022_Q3</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>45.83</td>
      <td>2022_Q3</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>25.00</td>
      <td>2022_Q3</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>40.00</td>
      <td>2022_Q2</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>31.53</td>
      <td>2022_Q2</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>41.67</td>
      <td>2022_Q2</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>33.33</td>
      <td>2022_Q2</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>72.22</td>
      <td>2018_Q3</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>34.72</td>
      <td>2018_Q3</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>41.18</td>
      <td>2018_Q3</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>50.00</td>
      <td>2018_Q3</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>55.00</td>
      <td>2018_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>24.32</td>
      <td>2018_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>30.00</td>
      <td>2018_Q1</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>57.14</td>
      <td>2018_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>80.95</td>
      <td>2016_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>32.21</td>
      <td>2016_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>35.71</td>
      <td>2016_Q4</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>42.86</td>
      <td>2016_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>21.05</td>
      <td>2022_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>20.64</td>
      <td>2022_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>52.00</td>
      <td>2022_Q1</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>10.00</td>
      <td>2022_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>77.78</td>
      <td>2020_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>20.47</td>
      <td>2020_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>46.43</td>
      <td>2020_Q4</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>41.67</td>
      <td>2020_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>68.00</td>
      <td>2025_Q2</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>34.60</td>
      <td>2025_Q2</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>33.33</td>
      <td>2025_Q2</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>60.00</td>
      <td>2025_Q2</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>48.28</td>
      <td>2025_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>33.97</td>
      <td>2025_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>40.00</td>
      <td>2025_Q1</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>60.00</td>
      <td>2025_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>89.47</td>
      <td>2017_Q3</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>22.79</td>
      <td>2017_Q3</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>42.86</td>
      <td>2017_Q3</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>40.00</td>
      <td>2017_Q3</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>84.62</td>
      <td>2021_Q2</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>19.27</td>
      <td>2021_Q2</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>50.00</td>
      <td>2021_Q2</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>46.67</td>
      <td>2021_Q2</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>61.11</td>
      <td>2021_Q3</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>30.88</td>
      <td>2021_Q3</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>41.18</td>
      <td>2021_Q3</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>46.67</td>
      <td>2021_Q3</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>77.27</td>
      <td>2017_Q2</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>27.83</td>
      <td>2017_Q2</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>46.67</td>
      <td>2017_Q2</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>33.33</td>
      <td>2017_Q2</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>33.33</td>
      <td>2023_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>19.65</td>
      <td>2023_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>55.56</td>
      <td>2023_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>50.00</td>
      <td>2021_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>26.05</td>
      <td>2021_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>52.17</td>
      <td>2021_Q1</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>46.15</td>
      <td>2021_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>73.91</td>
      <td>2017_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>28.44</td>
      <td>2017_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>50.00</td>
      <td>2017_Q1</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>40.00</td>
      <td>2017_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>28.57</td>
      <td>2019_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>14.62</td>
      <td>2019_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>17.65</td>
      <td>2019_Q4</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>38.89</td>
      <td>2019_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>27.59</td>
      <td>2023_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>20.85</td>
      <td>2023_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>45.45</td>
      <td>2023_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>52.63</td>
      <td>2021_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>24.66</td>
      <td>2021_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>40.00</td>
      <td>2021_Q4</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>40.00</td>
      <td>2021_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>60.00</td>
      <td>2019_Q1</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>36.32</td>
      <td>2019_Q1</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>38.89</td>
      <td>2019_Q1</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>55.56</td>
      <td>2019_Q1</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>68.42</td>
      <td>2017_Q4</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>23.15</td>
      <td>2017_Q4</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>29.41</td>
      <td>2017_Q4</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>22.22</td>
      <td>2017_Q4</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>50.00</td>
      <td>2023_Q2</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>18.47</td>
      <td>2023_Q2</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>57.89</td>
      <td>2023_Q2</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>53.33</td>
      <td>2019_Q3</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>20.36</td>
      <td>2019_Q3</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>35.29</td>
      <td>2019_Q3</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>11.76</td>
      <td>2019_Q3</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>35.71</td>
      <td>2019_Q2</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>27.65</td>
      <td>2019_Q2</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>29.41</td>
      <td>2019_Q2</td>
    </tr>
    <tr>
      <td>UMAN</td>
      <td>58.82</td>
      <td>2019_Q2</td>
    </tr>
    <tr>
      <td>KANASIN</td>
      <td>16.67</td>
      <td>2023_Q3</td>
    </tr>
    <tr>
      <td>MERIDA</td>
      <td>24.31</td>
      <td>2023_Q3</td>
    </tr>
    <tr>
      <td>PROGRESO</td>
      <td>63.16</td>
      <td>2023_Q3</td>
    </tr>
  </tbody>
</table>
                    <p class="text-muted-custom">La siguiente tabla contiene los datos agregados utilizados para generar las visualizaciones. Puede ordenar las columnas o utilizar el buscador para explorar los datos en detalle.</p>
                </div>
            </div>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>

    <script>
        const TEAL_COLOR = '#20c997';

        // Data injected from Python
        const lineData = {"periodo": ["2016_Q4", "2017_Q1", "2017_Q2", "2017_Q3", "2017_Q4", "2018_Q1", "2018_Q2", "2018_Q3", "2018_Q4", "2019_Q1", "2019_Q2", "2019_Q3", "2019_Q4", "2020_Q1", "2020_Q3", "2020_Q4", "2021_Q1", "2021_Q2", "2021_Q3", "2021_Q4", "2022_Q1", "2022_Q2", "2022_Q3", "2022_Q4", "2023_Q1", "2023_Q2", "2023_Q3", "2023_Q4", "2024_Q1", "2024_Q2", "2024_Q3", "2024_Q4", "2025_Q1", "2025_Q2"], "porcentaje_inseguros": [47.932500000000005, 48.0875, 46.275, 48.78, 35.8, 41.615, 47.005, 49.53, 40.03, 47.6925, 37.8975, 30.185, 24.932499999999997, 31.9, 29.7725, 46.5875, 43.5925, 50.14, 44.96, 39.322500000000005, 25.9225, 36.6325, 37.41, 35.5625, 31.296666666666667, 42.12, 34.71333333333333, 36.18, 28.296666666666667, 40.2575, 30.1575, 45.475, 45.5625, 48.9825]};
        const barData = {"municipio": ["KANASIN", "PROGRESO", "UMAN", "MERIDA"], "porcentaje_inseguros": [51.03058823529412, 42.42323529411765, 41.25793103448276, 25.173823529411763]};

        // Line Chart
        const lineTrace = {
            x: lineData.periodo,
            y: lineData.porcentaje_inseguros,
            mode: 'lines+markers',
            name: 'Inseguridad',
            marker: { color: TEAL_COLOR }
        };
        const lineLayout = {
            xaxis: { title: 'Periodo' },
            yaxis: { title: 'Porcentaje de Inseguridad' }
        };
        Plotly.newPlot('line-chart', [lineTrace], lineLayout);

        // Bar Chart
        const barTrace = {
            x: barData.porcentaje_inseguros,
            y: barData.municipio,
            type: 'bar',
            orientation: 'h',
            marker: { color: TEAL_COLOR }
        };
        const barLayout = {
            yaxis: { automargin: true },
            xaxis: { title: 'Inseguridad Promedio (%)' }
        };
        Plotly.newPlot('bar-chart', [barTrace], barLayout);

        // Data Table
        $(document).ready(function() {
            $('#dataTable').DataTable();
        });
    </script>
</body>
</html>
